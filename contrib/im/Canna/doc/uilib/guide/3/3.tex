ユーザインタフェースライブラリの呼び出しには必ず {\it context\_id} を指
定します。

さて、{\it context\_id} とはなんでしょうか。

{\it context\_id} とはなんなのかを説明する前に以下の状況を考えます。

アプリケーションプログラムが２つのウィンドウを同時に表示しており、それ
ぞれのウィンドウにおいて入力を受け付けている状況を考えて下さい。

\begin{center}
\hbox{\vrule\vbox{\hrule{
\hbox to 16cm{\kern20pt\vbox{\kern10pt

\input{fig/context.tex}

\kern10pt}\kern20pt}
}\hrule}\vrule}
\end{center}
\vspace{0.5cm}

２つのウィンドウでの入力はあたかも２つの端末での入力のように独立して行
われると考えるのが自然です。

すなわち、１つのウィンドウで『わたしの$<$変換$>$』まで打った時にもうひとつ
のウィンドウで他の入力を始めたとしても最初のウィンドウでは
『わたしの$<$変換$>$』の状態のままになっているのが望ましいわけです。

このような処理はかな漢字変換を行っているプロセスがウィンドウ毎に別々で
あれば自然に行われる処理ですが単一のプロセスで複数の入力部分を持ってい
る場合にはうまく切り分けないと混
乱が生じてしまいます。
最近のプログラミングにおいては１つのプ
ロセスにて複数のウィンドウを表示してそれぞれのウィンドウにて入力を待つ
と言う事態はざらに発生しますので切り分けがうまく行
えなければなりません。

上記の場合、キーの入力がどちらのウィンドウから入力されたのかを
区別するなんらかの識別子が必要になります。context\_id はユーザインタフェー
スライブラリを呼び出す時に、その処理がどの入力ポートに関するものなのか
を表すものなのです。
すなわちかな漢字変換の処理単位を示す識別子なのです。

context\_id としては int で表されるどのような値を与えてもかまいません。
例えば open で返されるファイル記述子や、fopen で返されるファイルポイン
タを int 型にキャストしたものでも良いのです。複数の入力部分間で重なる
ことのない値であればどのような値でも構いません。

特にＸウィンドウ上でのプログラミングでは、Widget 構造体への
ポインタを int 型にキャストして用いると良いでしょう。

コンテクストを切り分ける必要がない場合には context\_id として 0 を指定
します。
